"use strict";function BigView(t){var i=this;t=t||{},this.container=e({"class":"bv-container"}),this.container.style.display="none",this.container.setAttribute("tabindex",-1),this.container.addEventListener("keydown",function(t){var e=[76,68,74,83,9,13,32,39,40],n=[65,72,75,87,37,38],s=[27,8];if(9===t.keyCode&&t.shiftKey)i.prev();else if(-1!==e.indexOf(t.keyCode))i.next();else if(-1!==n.indexOf(t.keyCode))i.prev();else{if(-1===s.indexOf(t.keyCode))return;i.hide()}t.preventDefault(),t.stopPropagation()}),this.toolbar=e({"class":"bv-toolbar",parent:this.container}),this.body=e({"class":"bv-body",parent:this.container,action:function(t){"img"===t.target.tagName.toLowerCase()&&(i.next(),t.stopPropagation(),t.preventDefault())}}),this.navigation=e({"class":"bv-navigation",parent:this.container}),this.navigationRight=e({"class":"bv-nav-r",parent:this.navigation}),this.navigationLeft=e({"class":"bv-nav-l",parent:this.navigation}),this.prevButton=e({"class":"bv-button",tag:"button",parent:this.navigation,content:icon("M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"),action:function(t){i.prev()}}),1==t.enableSlideshow&&(this.slideshowButton=e({"class":"bv-button",tag:"button",parent:this.navigation,content:icon("M8 5v14l11-7z"),action:function(t){i.toggleInterval()}}),this.setSlideDuration(t.slideDuration)),this.nextButton=e({"class":"bv-button",tag:"button",parent:this.navigation,content:icon("M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"),action:function(t){i.next()}}),this.counter=e({tag:"span","class":"bv-counter",parent:this.navigationLeft}),this.counterCurrent=e({tag:"span","class":"bv-counter-current",parent:this.counter}),this.counterAll=e({tag:"span","class":"bv-counter-all",parent:this.counter}),this.closeButton=e({"class":"bv-button bv-close",tag:"button",parent:this.toolbar,content:icon("M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"),action:function(t){i.hide()}}),this.gallery=e({tag:"div","class":"bv-gallery",parent:this.container,action:function(t){i.setImage(t.target)}}),void 0===t.enableGallery||1==t.enableGallery?this.galleryButton=e({"class":"bv-button bv-gallery-button bv-toggle-button bv-on",tag:"button",parent:this.navigationRight,content:icon("M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z"),action:function(t){i.toggleGallery()}}):this.container.classList.add("bv-no-gallery"),void 0===t.showGallery||1==t.showGallery?this.showGallery():this.hideGallery(),(void 0===t.enableDescription||1==t.enableDescription)&&(this.descButton=e({"class":"bv-button bv-desc-button bv-toggle-button",tag:"button",parent:this.navigationRight,content:icon("M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z"),action:function(t){i.toggleDescription()}})),void 0===t.showDescription||1==t.showDescription?this.showDescription():this.hideDescription();var n=!1;window.addEventListener("resize",function(){!n&&i.displayed&&(n=!0,window.requestAnimationFrame(function(){i.fixGalleryPosition(),n=!1}))}),this.displayed=!1,this.images=[],this.imageKeys=[],this.current,this.currentKeyIndex,document.body.appendChild(this.container),"number"!=typeof BigView.numberOfBigViews&&(BigView.numberOfBigViews=0),this.id=BigView.numberOfBigViews,BigView.numberOfBigViews++}function BigViewImage(t){t=t||{},this.bigView=t.bigView,this.container=e({"class":"bv-img-cont"}),this.img=e({tag:"img","class":"bv-img",parent:this.container,attributes:{src:t.src}}),this.img.bigViewObject=this,this.description=e({"class":"bv-desc",parent:this.container}),this.thumbnail=e({tag:"img",attributes:{src:t.src},parent:this.bigView.gallery}),this.setDescription(t.description),this.thumbnail.bigViewObject=this}function icon(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","path");return e.classList.add("bv-icon"),e.setAttribute("viewBox","0 0 24 24"),e.appendChild(i),i.setAttribute("d",t),e}function e(t){t=t||{};var e=document.createElement(t.tag||"div");if("string"==typeof t["class"]&&t["class"].split(" ").forEach(function(t){e.classList.add(t)}),"string"==typeof t.content||"number"==typeof t.content?e.innerHTML=t.content:t.content instanceof Node&&e.appendChild(t.content),t.parent instanceof HTMLElement&&t.parent.appendChild(e),"object"==typeof t.attributes)for(var i in t.attributes)e.setAttribute(i,t.attributes[i]);if("object"==typeof t.style)for(var n in t.style)e.style[n]=t.style[n];return"function"==typeof t.action&&e.addEventListener("click",t.action),e}BigView.prototype.show=function(t){t instanceof HTMLElement&&(this.displayed=!0,document.body.style.overflow="hidden",this.container.style.zIndex=100,this.container.style.opacity=0,this.container.style.display="block",this.setImage(t),this.container.focus(),this.container.style.opacity=1)},BigView.prototype.hide=function(){this.displayed=!1,document.body.style.overflow=null,this.container.style.opacity=0,this.container.style.zIndex=-100,this.stopSlideshow()},BigView.prototype.fixGalleryPosition=function(){if(null!=this.current&&null!=this.gallery){var t=window.innerWidth,e=this.current.thumbnail.clientWidth,i=this.current.thumbnail.offsetLeft,n=this.gallery.offsetLeft,s=i+n,o=t/2-e/2,a=s-o;this.gallery.style.transform="translateX( "+(n-a)+"px )"}},BigView.prototype.getImageObject=function(t){if("number"==typeof t)return t>=this.images.length?this.getImageObject(t-this.images.length):0>t?this.getImageObject(t+this.images.length):this.images[t];if(t instanceof BigViewImage){if(-1!==this.images.indexOf(t))return t}else{if(!(t instanceof Node))return null;if(null!=t.bigViews)return this.getImageObject(t.bigViews[this.id]);if(t.bigViewObject instanceof BigViewImage)return t.bigViewObject}},BigView.prototype.setImage=function(t){var e=this;if(t=e.getImageObject(t),t instanceof BigViewImage){var i=this.current;this.current=t,this.counterCurrent.innerHTML=t.i+1,this.fixGalleryPosition(),t.activate(),null!=i&&i!=t&&i.deactivate()}},BigView.prototype.next=function(){this.setImage(this.current.i+1)},BigView.prototype.prev=function(){this.setImage(this.current.i-1)},BigView.prototype.addBigViewImage=function(t){t instanceof BigViewImage&&(this.images.push(t),this.counterAll.innerHTML=this.images.length,this.body.appendChild(t.container))},BigView.prototype.addImgElement=function(t){var e=this;if("img"===t.tagName.toLowerCase()){var i=new BigViewImage({bigView:e,src:t.src,description:t.alt});e.addBigViewImage(i),t.addEventListener("click",function(t){e.show(t.target)}),"object"!=typeof t.bigViews&&(t.bigViews={}),t.bigView=e,t.bigViews[e.id]=i}},BigView.prototype.addImageSource=function(t){var e=this;if("string"==typeof t){var i=new BigViewImage({src:t,bigView:e});e.addBigViewImage(i)}},BigView.prototype.addSelector=function(t){"string"==typeof t&&this.add(document.querySelectorAll(t))},BigView.prototype.add=function(t){var e=this;if(t.jquery)t.each(function(t,i){"img"===i.tagName.toLowerCase()&&e.addImgElement(i)});else if(t instanceof NodeList)for(var i=0;i<t.length;i++)e.addImgElement(t[i]);else t instanceof Node?e.addImgElement(t):"string"==typeof t?e.addSelector(t):"object"==typeof t&&e.addBigViewImage(new BigViewImage({bigView:e,src:t.src,description:t.description}))},BigView.prototype.addImages=BigView.prototype.add,BigView.prototype.toggleGallery=function(){this.galleryDisplayed?this.hideGallery():this.showGallery()},BigView.prototype.showGallery=function(){this.galleryDisplayed=!0,this.galleryButton instanceof Node&&this.galleryButton.classList.add("bv-on"),this.container.classList.remove("bv-no-gallery"),this.fixGalleryPosition()},BigView.prototype.hideGallery=function(){this.galleryDisplayed=!1,this.galleryButton instanceof Node&&this.galleryButton.classList.remove("bv-on"),this.container.classList.add("bv-no-gallery")},BigView.prototype.toggleDescription=function(){this.descriptionEnabled?this.hideDescription():this.showDescription()},BigView.prototype.showDescription=function(){this.descriptionEnabled=!0,this.descButton instanceof Node&&this.descButton.classList.add("bv-on"),this.body.classList.remove("bv-no-desc")},BigView.prototype.hideDescription=function(){this.descriptionEnabled=!1,this.descButton instanceof Node&&this.descButton.classList.remove("bv-on"),this.body.classList.add("bv-no-desc")},BigView.prototype.setSlideDuration=function(t){"number"==typeof t&&t>0?this.slideDuration=t:this.slideDuration=BigView.slideDuration},BigView.slideDuration=2e3,BigView.prototype.startSlideshow=function(){var t=this;null!=this.slideshowInterval&&clearInterval(this.slideshowInterval),this.slideshowButton.querySelector("path").setAttribute("d","M6 19h4V5H6v14zm8-14v14h4V5h-4z"),this.slideshowInterval=window.setInterval(function(){t.next()},this.slideDuration)},BigView.prototype.stopSlideshow=function(){if(null!=this.slideshowInterval){this.slideshowButton.querySelector("path").setAttribute("d","M8 5v14l11-7z"),clearInterval(this.slideshowInterval),this.slideshowInterval=null}},BigView.prototype.toggleInterval=function(){null==this.slideshowInterval?this.startSlideshow():this.stopSlideshow()},BigViewImage.prototype.activate=function(){this.container.classList.add("bv-active"),this.thumbnail.classList.add("bv-active")},BigViewImage.prototype.deactivate=function(){this.container.classList.remove("bv-active"),this.thumbnail.classList.remove("bv-active")},BigViewImage.prototype.setDescription=function(t){t=t||"",this.description.innerHTML=t},BigViewImage.prototype.next=function(){return this.bigView.getImageObject(this.i+1)},BigViewImage.prototype.prev=function(){return this.bigView.getImageObject(this.i-1)},Object.defineProperty(BigViewImage.prototype,"i",{get:function(){return this.bigView.images.indexOf(this)}}),icon.paths={play:"M8 5v14l11-7z"};